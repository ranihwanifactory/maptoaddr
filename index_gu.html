<html><head>

<script async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3195939510837246" crossorigin="anonymous"></script>
    <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <title>지도찍어주소!</title>
  <meta name="description" content="지도에서 선택한 위치의 주소를 알려주고 카카오톡으로 공유하는 웹애플리케이션">
  <meta name="author" content="hwanacoding">
  <link rel="shortcut icon" href="icon.ico">
  <meta name="keywords" content="hwancoding,지도찍어주소">
  <meta name="author" content="hwancoding">
  <meta name="og:site_name" content="지도찍어주소">
  <meta name="og:title" content="지도찍어주소">
  <meta name="og:description" content="지도를 찍으면 주소가 바로 확인.">
  <meta name="og:url" content="https://maptoaddr.netlify.app">
  <meta name="og:image" content="logo.png">
<meta property="og:image" content="https://maptoaddr.netlify.app/logo.png"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>

	/* 배너 광고의 스타일을 정의합니다 */
        #banner-ad {
            position: fixed; /* 고정 위치로 설정 */
            bottom: 30px; /* 페이지 하단에 위치 */
            width: 100%; /* 전체 너비 */
            background-color: ; /* 배너 배경 색상 */
            text-align: center; /* 텍스트 중앙 정렬 */
            padding: 10px; /* 배너 패딩 */
            box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1); /* 그림자 효과 */
			z-index: 1;
        }


        body, html {margin: 0; padding: 0; width: 100%; height: 100%;}
		#maptoaddr{position: absolute;height:30px;top: 20px; left: 10px; z-index: 1;}
		#btnStory{position: absolute;top: 50px; right: 10px; z-index: 1;}
        #map {width: 100%; height: 100%; position: absolute; top: 0; left: 0; z-index: 0;}

		 #name {position: absolute; height:35px; margin:0px;bottom: 130px; left: 10px; z-index: 1; width: 120px;}
		  #phone {position: absolute; height:35px; margin:0px;bottom: 130px; left: 150px; z-index: 1; width: 250px;}

        #addressInput {position: absolute; height:35px; margin:0px;bottom: 80px; left: 10px; z-index: 1; width: calc(95% - 0px );}

        #phoneInput {position: absolute; top: 40px; left: 10px; z-index: 1; width: calc(100% - 50px);}
        #copyButton {position: absolute; height:100px;top: 10px; right: 10px; z-index: 1;}
        #navigateButton {position: absolute;  height:30px; margin:0px; top: 100px; left: 50%; transform: translateX(-50%); z-index: 1;}
		 #close {position: absolute;  height:30px; margin:0px; top: 100px; right: 35%; transform: translateX(-50%); z-index: 1;}
        #showOnMapButton {position: absolute; bottom: 50px; left: 50%; transform: translateX(-50%); z-index: 1;}
		
		.title{font-size:12pt;}
		.bAddr{background-color:#eeeeee;width:100%;}
		.kakao-link {
			float:left;
			
			display: block;

		
			border:solid 1px #cccccc;
			background:#fff755;
		
			-webkit-box-pack:center;	
			-webkit-border-radius: 5px;
			-moz-border-radius: 5px;
		
			cursor: pointer;
			
			
		}

	.kakao-link span {
		font-weight:bold;
		font-size:13pt;
		color:#333333;
		margin:5px;	
		}
    </style>

<link rel="manifest" href="/manifest.json"></head>
<body>


<div id="map"></div>
<input type="text" id="name" value="" placeholder="이름">
<input type="text" id="phone" value="" placeholder="연락처" oninput="oninputPhone(this)" maxlength="14">
<input type="text" id="addressInput" placeholder="지도를 클릭하면 주소가 입력됩니다.">
<!-- <button id="copyButton" onclick="copy_to_clipboard()">주소 복사</button> -->
<!-- <button id="navigateButton" onclick="copy_to_clipboard()">주소 복사</button> -->
<!-- <button id="showOnMapButton" onclick="show_on_map()">지도에 표시</button> -->

<!-- <button onclick="setOverlayMapTypeId('traffic')">교통정보 보기</button> 
<button onclick="setOverlayMapTypeId('roadview')">로드뷰 도로정보 보기</button> 
<button onclick="setOverlayMapTypeId('terrain')">지형정보 보기</button>
<button onclick="setOverlayMapTypeId('use_district')">지적편집도 보기</button>
 -->
 	<!-- <a id="maptoaddr" class="kakao-link" href="/" style="text-decoration:none;">
				    <span><지도찍어주소[MAPtoADDR]></span> -->
					<a id="maptoaddr" href="/" style="text-decoration:none;">
				    <img id="timg" src="tlogo.png" width="150" alt="지도찍어주소">

				</a>
	<!-- <a id="btnStory" class="kakao-link" onclick="shareToKakao()">
				    <span>앱 공유하기</span> -->
				



				<script src="https://developers.kakao.com/sdk/js/kakao.min.js"></script>

<script src="https://t1.kakaocdn.net/kakao_js_sdk/2.7.1/kakao.min.js" integrity="sha384-kDljxUXHaJ9xAb2AzRd59KxjrFjzHa5TAoFQ6GbYTCAG0bjM55XohjjDT7tDDC01" crossorigin="anonymous"></script>


<script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=7e88cf2e2962d67bb246f38f504dc200&amp;libraries=services"></script> 
<!-- <script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=8b1400129284b123b0d7a7c7f957997a&libraries=services"></script>-->
<script>
    /*function copy_to_clipboard() {    
      var copyText = document.getElementById('addressInput');
	  var address = document.getElementById('addressInput').value;
	  if (!address)
	  {
		   alert('지도를 선택해주세요.'+copyText);

	  }
	  else{
      copyText.select();
      copyText.setSelectionRange(0, 99999);
      document.execCommand("Copy");
      alert('"'+ address + '" 주소가 복사되었습니다.');
      document.activeElement.blur();
	  
	  }


    }*/

	function oninputPhone(target) {
    target.value = target.value
        .replace(/[^0-9]/g, '')
        .replace(/(^02.{0}|^01.{1}|[0-9]{3,4})([0-9]{3,4})([0-9]{4})/g, "$1-$2-$3");
}

    function setAddress(address) {
        var addressInput = document.getElementById('addressInput');
        addressInput.value = address;
    }

    function navigate_to_address() {
        var address = document.getElementById('addressInput').value;
        // 주소를 검색하여 해당 위치로 이동하는 코드를 여기에 추가하세요
        alert('주소로 이동합니다: ' + address);
        // 여기에 해당 주소의 위치로 지도를 이동하고 확대하는 코드를 추가하세요
    }

    function show_on_map() {
        var address = document.getElementById('addressInput').value;
        // 주소를 검색하여 해당 위치를 지도에 표시하는 코드를 여기에 추가하세요
        alert('지도에 위치를 표시합니다: ' + address);
    }

    var mapContainer = document.getElementById('map');
    var mapOption = {
        center: new kakao.maps.LatLng(35.91917, 128.2833), // 지도의 중심좌표
        mapTypeId: kakao.maps.MapTypeId.HYBRID,
        level: 6 // 지도의 확대 레벨
    };


	Kakao.init('7e88cf2e2962d67bb246f38f504dc200'); // 사용하려는 앱의 JavaScript 키 입력

    // 지도를 생성합니다    
    var map = new kakao.maps.Map(mapContainer, mapOption); 



	//geolocation -start
var imageSrc = 'https://maptoaddr.netlify.app/icon.png', // 마커이미지의 주소입니다    
    imageSize = new kakao.maps.Size(64, 69), // 마커이미지의 크기입니다
    imageOption = {offset: new kakao.maps.Point(27, 69)}; // 마커이미지의 옵션입니다. 마커의 좌표와 일치시킬 이미지 안에서의 좌표를 설정합니다

var markerImage = new kakao.maps.MarkerImage(imageSrc, imageSize, imageOption),
    markerPosition = new kakao.maps.LatLng(37.54699, 127.09598); // 마커가 표시될 위치입니다

	// HTML5의 geolocation으로 사용할 수 있는지 확인합니다 
if (navigator.geolocation) {
    
    // GeoLocation을 이용해서 접속 위치를 얻어옵니다
    navigator.geolocation.getCurrentPosition(function(position) {
        
        var lat = position.coords.latitude, // 위도
            lon = position.coords.longitude; // 경도
        
        var locPosition = new kakao.maps.LatLng(lat, lon), // 마커가 표시될 위치를 geolocation으로 얻어온 좌표로 생성합니다
            message = '<div style="padding:5px;">현재위치</div>'; // 인포윈도우에 표시될 내용입니다
        
        // 마커와 인포윈도우를 표시합니다
        displayMarker(locPosition, message);
            
      });
    
} else { // HTML5의 GeoLocation을 사용할 수 없을때 마커 표시 위치와 인포윈도우 내용을 설정합니다
    
    var locPosition = new kakao.maps.LatLng(33.450701, 126.570667),    
        message = 'geolocation을 사용할수 없어요..'
        
    displayMarker(locPosition, message);
}

var imageSrc = 'mylo.png', // 마커이미지의 주소입니다    
    imageSize = new kakao.maps.Size(30, 30), // 마커이미지의 크기입니다
    imageOption = {offset: new kakao.maps.Point(27, 69)}; // 마커이미지의 옵션입니다. 마커의 좌표와 일치시킬 이미지 안에서의 좌표를 설정합니다.

// 마커의 이미지정보를 가지고 있는 마커이미지를 생성합니다
var markerImage = new kakao.maps.MarkerImage(imageSrc, imageSize, imageOption),
    markerPosition = new kakao.maps.LatLng(37.54699, 127.09598); // 마커가 표시될 위치입니다


// 지도에 마커와 인포윈도우를 표시하는 함수입니다
function displayMarker(locPosition, message) {

    // 마커를 생성합니다
    var marker = new kakao.maps.Marker({  
        map: map, 
        position: locPosition,
		  image: markerImage // 마커이미지 설정
    }); 
    
    var iwContent = message, // 인포윈도우에 표시할 내용
        iwRemoveable = true;

    // 인포윈도우를 생성합니다
    var infowindow = new kakao.maps.InfoWindow({
        content : iwContent,
        removable : iwRemoveable
    });
    
    // 인포윈도우를 마커위에 표시합니다 
    infowindow.open(map, marker);
    
    // 지도 중심좌표를 접속위치로 변경합니다
    map.setCenter(locPosition);    }    



	//geolocation -end

																// 일반 지도와 스카이뷰로 지도 타입을 전환할 수 있는 지도타입 컨트롤을 생성합니다
																var mapTypeControl = new kakao.maps.MapTypeControl();

																// 지도에 컨트롤을 추가해야 지도위에 표시됩니다
																// kakao.maps.ControlPosition은 컨트롤이 표시될 위치를 정의하는데 TOPRIGHT는 오른쪽 위를 의미합니다
																map.addControl(mapTypeControl, kakao.maps.ControlPosition.TOPRIGHT);

    // 주소-좌표 변환 객체를 생성합니다
    var geocoder = new kakao.maps.services.Geocoder();

    var marker = new kakao.maps.Marker(), // 클릭한 위치를 표시할 마커입니다
        infowindow = new kakao.maps.InfoWindow({zindex:1}); // 클릭한 위치에 대한 주소를 표시할 인포윈도우입니다

    // 지도를 클릭했을 때 클릭 위치 좌표에 대한 주소정보를 표시하도록 이벤트를 등록합니다 <button id="navigateButton" onclick="copy_to_clipboard()">주소복사하기</button>
    kakao.maps.event.addListener(map, 'click', function(mouseEvent) {


		var name = document.getElementById('name').value;
		var phone = document.getElementById('phone').value;

			if(!name || !phone){name="이름없음";phone="연락처없음";}


        searchDetailAddrFromCoords(mouseEvent.latLng, function(result, status) {



			
			
            if (status === kakao.maps.services.Status.OK) { //지도에서 주소 가져오기
                var detailAddr = !!result[0].road_address ? '<div>도로명: ' + result[0].road_address.address_name + '</div>' : '';
                detailAddr += '<div>지번:' + result[0].address.address_name + '</div>';
                
                var content = '<div class="bAddr">' +
                                '<a href="javascript:delmarker();">[X]</a><span class="title">법정동 주소정보' + 
                                detailAddr + 
                            '</div><a id="kakaotalk-sharing-btn" href="#" onclick="#"><img id=close src=kakaotalk_sharing_btn_medium.png></a>';

                // 마커를 클릭한 위치에 표시합니다 
                marker.setPosition(mouseEvent.latLng);
                marker.setMap(map);

                // 인포윈도우에 클릭한 위치에 대한 법정동 상세 주소정보를 표시합니다
                infowindow.setContent(content);
                infowindow.open(map, marker);


				var image = document.getElementById('close');

				// 이미지에 클릭 이벤트 리스너 추가
				image.addEventListener('click', function() {
					// 클릭된 경우 실행할 함수 정의
					//alert(result[0].address.address_name);
					shareKakao(name,phone,result[0].address.address_name);
				});
            }   



            setAddress(result[0].address.address_name); // 주소를 가져와서 텍스트입력란에 표시

			//var readdr=result[0].address.address_name;
			
			
			//alert(name);
			//alert(result[0].address.address_name);
			
			//shareKakao(name,phone,result[0].address.address_name);

        });
    });



	function delmarker(){ //선택한 마커 삭제

		infowindow.close();

		marker.setMap(null);
	}





	     
	function shareKakao(name,phone,addr) { //공유시 실행함수

			Kakao.Share.createDefaultButton({
			  container: '#kakaotalk-sharing-btn',
			  objectType: 'location', //위치공유
			  address: addr,
			  addressTitle: name + '님의 공유주소',

			  content: {
				title: addr,
				description: name+','+phone,
				imageUrl: 'https://maptoaddr.netlify.app/icon.png',
				link: {
				  mobileWebUrl: 'https://maptoaddr.netlify.app/',
				  webUrl: 'https://maptoaddr.netlify.app/',
				},
			  },

			  social: {
				likeCount: 12286,
				commentCount: 345,
				sharedCount: 1845,
			  },
			  

				buttons: [
				{
				  title: '앱으로 보기',
				  link: {
					mobileWebUrl: 'https://maptoaddr.netlify.app/',
					webUrl: 'https://maptoaddr.netlify.app/',
				  },
				},


			  ],
			});

			
	}



    

    // 좌표로 법정동 상세 주소 정보를 요청하는 함수
    function searchDetailAddrFromCoords(coords, callback) {
        // 좌표로 법정동 상세 주소 정보를 요청합니다
        geocoder.coord2Address(coords.getLng(), coords.getLat(), callback);
    }


	function showLocation(addr) {
    var address = addr;
    
    // 지도를 표시할 div 요소 선택
    var mapContainer = document.getElementById("map");
    
    // 지도에 표시할 위치와 줌 레벨 설정
    var geocoder = new kakao.maps.services.Geocoder();
    geocoder.addressSearch(address, function(result, status) {
        if (status === kakao.maps.services.Status.OK) {
            var coords = new kakao.maps.LatLng(result[0].y, result[0].x);
            var mapOption = {
                center: coords,
                level: 3
            };
            // 지도 생성
            var map = new kakao.maps.Map(mapContainer, mapOption);
            
            // 마커 생성
            var marker = new kakao.maps.Marker({
                position: coords,
                map: map
            });
            
            // 인포윈도우 생성
            var infowindow = new kakao.maps.InfoWindow({
                content: '<div style="padding:5px;">' + address + '</div>'
            });
            // 마커에 클릭 이벤트 등록
            kakao.maps.event.addListener(marker, 'click', function() {
                infowindow.open(map, marker);
            });
        } else {
            alert("입력한 주소를 찾을 수 없습니다.");
        }
    });
}

showLocation(addr);


/*
	geocoder.addressSearch(addr, function(result, status) {

    // 정상적으로 검색이 완료됐으면 
     if (status === kakao.maps.services.Status.OK) {

        var coords = new kakao.maps.LatLng(result[0].y, result[0].x);

        // 결과값으로 받은 위치를 마커로 표시합니다
        var marker = new kakao.maps.Marker({
            map: map,
            position: coords
        });

        // 인포윈도우로 장소에 대한 설명을 표시합니다
        var infowindow = new kakao.maps.InfoWindow({
            content: '<div style="width:150px;text-align:center;padding:6px 0;">'+ name +'</div>'
        });
        infowindow.open(map, marker);

        // 지도의 중심을 결과값으로 받은 위치로 이동시킵니다
        map.setCenter(coords);
    } 
});  
*/

</script>



<script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('./serviceWorker.js')
          .then(registration => {
            console.log('Service worker registered:', registration);
          })
          .catch(error => {
            console.log('Service worker registration failed:', error);
          });
      });
    }
  </script>
  
  
 <script>
        // 배너 광고를 생성하는 함수
        function addBannerAd() {
            // 배너 광고 요소 생성
            const banner = document.createElement("div");
            banner.id = "banner-ad";

            // 배너 광고의 내용 설정
            banner.innerHTML = `
                <a href="https://smsmtapa.netlify.app" target='_blank'><img src='https://smsmtapa.netlify.app/banner.png' height=50px>
            `;

            // 배너 광고를 body 끝에 추가
            document.body.appendChild(banner);
        }

        // 페이지가 로드될 때 배너 광고 추가
        window.onload = addBannerAd;
    </script>
<!-- <ins class="kakao_ad_area" style="display:none;"
data-ad-unit = "DAN-6LgElt5bvnTIl0rS"
data-ad-width = "320"
data-ad-height = "50"></ins>
<script type="text/javascript" src="//t1.daumcdn.net/kas/static/ba.min.js" async></script> -->
  </body></html>